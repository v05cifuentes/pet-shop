<div class="container">
  <h2 class="mt-2">Citas</h2>
  <div class="mt-3">
    <div class="row">
      <div class="col">
        <h4>Buscar Citas</h4>
      </div>
      <div class="col d-flex justify-content-end">
        <button type="button" class="btn custom-new-btn" (click)="pedirNuevaCita()">Nueva Cita</button>
      </div>
    </div>

  <div class="row mt-3">
    <div class="col">
      <form class="d-flex">
        <input class="form-control me-2" type="search" placeholder="Nombre del Cliente" aria-label="Search" [(ngModel)]="nombreBuscado" name="filtro" (input)="filtrarCitas()">
      </form>
    </div>
  </div>

  <div class="row mt-3">
    <div class="col table-container">
      <table mat-table [dataSource]="citasFiltradas" class="custom-table">

        <!-- ID cita Column -->
        <ng-container matColumnDef="id">
          <th mat-header-cell *matHeaderCellDef> Id </th>
          <td mat-cell *matCellDef="let cita"> {{cita.id_cita}} </td>
        </ng-container>

        <!-- Nombre Cliente Column -->
        <ng-container matColumnDef="nombre">
          <th mat-header-cell *matHeaderCellDef> Cliente </th>
          <td mat-cell *matCellDef="let cita"> {{cita.nombre}} </td>
        </ng-container>

        <!-- Nombre Mascota Column -->
        <ng-container matColumnDef="nombre_mascota">
          <th mat-header-cell *matHeaderCellDef> Mascota </th>
          <td mat-cell *matCellDef="let cita"> {{cita.nombre_mascota}} </td>
        </ng-container>

        <!-- Fecha y Hora Column -->
        <ng-container matColumnDef="fecha_hora">
          <th mat-header-cell *matHeaderCellDef> Fecha y Hora </th>
          <td mat-cell *matCellDef="let cita"> {{cita.fecha_hora}} </td>
        </ng-container>

        <!-- Estado Column -->
        <ng-container matColumnDef="estado">
          <th mat-header-cell *matHeaderCellDef> Estado </th>
          <td mat-cell *matCellDef="let cita"> {{cita.estado}} </td>
        </ng-container>

        <!-- Notas Column -->
        <ng-container matColumnDef="notas">
          <th mat-header-cell *matHeaderCellDef> Notas </th>
          <td mat-cell *matCellDef="let cita"> {{cita.notas}} </td>
        </ng-container>

        <!-- Acciones Column -->
        <ng-container matColumnDef="acciones">
          <th mat-header-cell *matHeaderCellDef> Acciones </th>
          <td mat-cell *matCellDef="let cita">
            <button mat-icon-button type="button" class="btn btn-sm custom-edit-btn" (click)="editarCita(cita, cita.id_cita)">
              <mat-icon class="custom-icon">edit</mat-icon>
            </button>
            <button mat-icon-button type="button" class="btn btn-sm custom-delete-btn" (click)="cancelarCita(cita.id_cita)">
              <mat-icon class="custom-icon">highlight_off</mat-icon>
            </button>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>
    </div>
  </div>
</div>
